package com.fk.test.thread;

import java.io.IOException;

import org.junit.Test;

public class TestThread2 {
	
	public final synchronized void testwait() throws InterruptedException {
		System.out.println("this is t1 method doing 1");
		wait(0);
		System.out.println("this is t1 method doing 2");
		wait(0);
		System.out.println("this is t1 method doing 2");
	}
	
	public final synchronized void testsleep() throws InterruptedException {
		System.out.println("Thread:"+Thread.currentThread().getName()+" this is t1 method doing 1");
		Thread.sleep(3000);
		System.out.println("Thread:"+Thread.currentThread().getName()+" this is t1 method doing 2");
		Thread.sleep(3000);
		System.out.println("Thread:"+Thread.currentThread().getName()+" this is t1 method doing 3");
	}
	
	public final synchronized void testinterrupt() throws InterruptedException {
		System.out.println("Thread:"+Thread.currentThread().getName()+" this is t1 method doing 1");
		long i = 0;
		long max = Long.MAX_VALUE-5; 
		long dev = 100000;
		max = max - (max%dev);
		System.out.println("max===="+max);
		System.out.println("isInterrupted==1=="+Thread.currentThread().isInterrupted());
		while(!Thread.currentThread().isInterrupted() && i<max ) {
			i++;
			if(i%dev==0) {
				System.out.println("i===="+i);
			}
		}
		System.out.println("isInterrupted==2=="+Thread.currentThread().isInterrupted());
		System.out.println("Thread:"+Thread.currentThread().getName()+" this is t1 method doing 2");
		Thread.sleep(3000);
		System.out.println("Thread:"+Thread.currentThread().getName()+" this is t1 method doing 3");
	}
	
	
	@Test
	public void testwaitmain() throws Exception {
		final TestThread2 testThread2 = new TestThread2();
		Runnable r1 = new Runnable() {
			@Override
			public void run() {
				try {
					testThread2.testwait();
				} catch (InterruptedException e) {
					e.printStackTrace();
				}
			}};
		Thread t1 = new Thread(r1);
		Thread t2 = new Thread(r1);
		t1.start();
		Thread.sleep(1000);
		t2.start();
		System.in.read();
	}
	
	@Test
	public void testsleepmain() throws Exception {
		final TestThread2 testThread2 = new TestThread2();
		Runnable r1 = new Runnable() {
			@Override
			public void run() {
				try {
					testThread2.testsleep();
				} catch (InterruptedException e) {
					e.printStackTrace();
				}
			}};
		Thread t1 = new Thread(r1);
		Thread t2 = new Thread(r1);
		t1.start();
		Thread.sleep(1000);
		t2.start();
		System.in.read();
	}
	
	@Test
	public void testinterruptmain() throws Exception {
		final TestThread2 testThread2 = new TestThread2();
		Runnable r1 = new Runnable() {
			@Override
			public void run() {
				try {
					testThread2.testsleep();
				} catch (InterruptedException e) {
					e.printStackTrace();
				}
			}};
		Thread t1 = new Thread(r1);
		t1.start();
		Thread.sleep(1000);
		t1.interrupt();
		System.in.read();
	}

}
